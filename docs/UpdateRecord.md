# 更新记录（Update Record）

本文件用于记录「基于 Agent 的智能课程推荐平台」在各次敏捷迭代中的更新情况。

本记录覆盖目前完成的两次迭代。

包括：

- 迭代背景。
- 迭代目标。
- 迭代交付物。
- 验收与效果。
- 经验与下一步计划。

---

## 0. 项目概览

本项目名称：

- 基于 Agent 的智能课程推荐平台。

主要定位：

- 面向高校选课场景。
- 提供智能化的课程推荐能力。
- 结合 RAG（Retrieval Augmented Generation）技术。
- 引入向量数据库和大语言模型。
- 支持基础的产品级工程能力（限流、云原生、CI/CD 等）。

核心技术关键词：

- Agent。
- RAG。
- 标量检索。
- 向量检索。
- Qdrant。
- Jenkins。
- CI/CD。
- MCP 协议（后续计划）。

当前已完成的迭代数量：

- 第一次迭代。
- 第二次迭代。

---

## 1. 第一次迭代：最小可行产品与基础 RAG 能力

### 1.1 迭代基本信息

迭代主题：

- 敏捷开发 · 第一次迭代。

展示标题：

- 《基于 Agent 的智能课程推荐平台》。
- 「敏捷开发 · 第一次迭代」。

迭代整体结构：

- 迭代目标。
- 交付物。
- 验收标准。
- 结果与总结。

---

### 1.2 迭代目标总览

第一次迭代的核心目标是：

- 搭建最小可行产品（MVP）。
- 建立一条端到端的调用链路。
- 让系统能够完成一次真实的问答闭环。
- 在技术上初步落地 RAG 流程。
- 在体验上初步验证可用性。

本次迭代的目标可以拆解为两个层面：

1. 产品功能层面。
2. 技术实现层面。

---

### 1.3 迭代目标 —— 最小可行性产品（MVP）

在产品层面，第一次迭代希望达成的目标是：

- 用户可以发起一个请求。
- 系统可以正确接收这个请求。
- Agent 能够被正确调用。
- Agent 能根据已有的上下文或逻辑生成响应。
- 用户可以在前端看到一个完整的返回结果。

可以理解为：

- 从「用户提问」到「看到回答」的闭环被打通。
- 不要求功能特别复杂。
- 但要求链路必须能稳定跑通。

核心链路要素包括：

- 用户请求。
- 后端接入层。
- Agent。
- 结果输出。

---

### 1.4 迭代目标 —— 基础 RAG 查询能力

在技术层面，第一次迭代还希望：

- 为后续的 RAG 架构打基础。
- 初步接入一个数据源。
- 初步搭建向量检索相关的模块。

具体来说，目标包括：

- 构建一个基础的检索与嵌入索引服务。
- 支持将课程或文档数据进行嵌入。
- 支持根据问题进行向量检索。
- 将检索到的内容作为上下文提供给 Agent 或 LLM。
- 形成「检索增强生成」的最小闭环。

这一轮不强调：

- 多数据源。
- 多维度筛选。
- 复杂的标量条件。

重点在于：

- 有一个真实可用的数据源。
- 能基于该数据源完成最简化的 RAG 查询。

---

### 1.5 第一次迭代的主要交付物

本轮迭代交付物可以归纳为三类。

第一类：

- 可运行的 Demo 系统。

特点：

- 可以处理简单的问答请求。
- 用户可以通过界面或接口发出问题。
- 系统会调用 Agent 并返回结果。
- 用于验证「从前端到 Agent 再到结果」的完整链路。

第二类：

- 初步的数据检索与嵌入索引服务。

特点：

- 将选定的数据源进行结构化或半结构化处理。
- 对文本内容进行向量化处理。
- 在本地或简单环境中完成索引构建。
- 允许基于嵌入向量进行相似度检索。

第三类：

- 初版的接口与功能定义。

包括但不限于：

- 请求参数的大致结构。
- 响应字段的基本形态。
- 主要错误类型的处理方式。
- Agent 调用方式的整体约定。

---

### 1.6 验收标准设计

第一次迭代的验收标准主要分为两个方面。

第一个方面：

- 功能可用性。

基本要求：

- 根据用户请求，系统能够成功返回对应结果。
- 端到端链路上不出现致命错误。
- 在常见输入下表现稳定。

第二个方面：

- 用户感受和满意度。

验收方式：

- 随机采样 10 个用户进行体验评估。
- 让用户实际发问并查看系统回答。
- 收集主观满意度评价。

验收标准：

- 用户满意度需要达到或超过 70%。
- 使用简单的量表或问卷进行统计。

---

### 1.7 验收结果与总结

从 PPT 总结来看：

- 随机采样 10 个用户。
- 用户整体满意度达到预设标准（≥ 70%）。
- 功能闭环得到验证。
- 系统在基础可用性层面通过验收。

通过第一次迭代，团队获得的核心结论包括：

- Agent + RAG 在选课场景下是可行的。
- 最小闭环方案可以支撑基本演示和体验。
- 为后续「提升检索智能」和「优化工程能力」提供了可靠出发点。

同时也暴露出：

- 检索逻辑仍然较为单一。
- 对结构化条件的支持不足。
- 工程自动化水平不够。

这些问题成为第二次迭代的输入。

---

## 2. 第二次迭代：检索智能化、云原生向量库与 CI/CD

### 2.1 迭代基本信息

迭代主题：

- 敏捷开发 · 第二次迭代。

展示标题：

- 《基于 Agent 的智能课程推荐平台》。
- 「敏捷开发 · 第二次迭代」。

汇报相关信息：

- 汇报人 & 组长：龚仁杰。
- 制作人：常乐。

结构目录：

- 上阶段反思与迭代目标。
- 本阶段交付物。
- 总结与下阶段计划。

---

### 2.2 上一阶段成果反思

在第二次迭代开始前，团队对第一次迭代成果进行了复盘。

主要问题总结如下。

问题一：

- RAG 检索较为笨重。
- 无法智能地实现「标量 + 向量」结合的检索。
- 对复杂筛选条件支持不足。

问题二：

- 向量数据库嵌入在本地环境。
- 向量存储和检索任务占用主服务器资源。
- 资源利用率不高。
- 系统扩展性受到限制。

问题三：

- 尚未实现 CI/CD。
- 开发流程仍然依赖手工操作。
- 版本集成、测试与部署的效率有待提升。
- 发布过程缺乏标准化流水线。

这些问题直接影响：

- 检索质量。
- 系统性能。
- 团队迭代效率。

---

### 2.3 第二次迭代总体目标

基于上述反思，第二次迭代确立了三个核心目标。

目标一：

- 提高检索智能性。
- 实现标量 + 向量混合检索。

目标二：

- 提升资源利用率。
- 将向量检索迁移至云原生向量数据库。

目标三：

- 优化开发与交付流程。
- 搭建智能 CI/CD 流水线。

这三个目标分别对应：

- 检索层面的「聪明」程度。
- 架构层面的「解耦」和「扩展」能力。
- 工程实践层面的「自动化」和「高效」能力。

---

### 2.4 目标一：提升检索智能性（标量 + 向量）

在第二次迭代中，团队针对检索逻辑做了重要升级。

核心思路：

- 不再只依赖向量相似度。
- 将结构化的标量条件与语义向量检索结合起来。

标量部分负责：

- 按课程类别过滤。
- 按是否有期末考试过滤。
- 按作业量或标签进行预筛选。
- 按一些明确的业务规则缩小候选集合。

向量部分负责：

- 对用户自然语言需求进行语义编码。
- 根据语义相似度对候选课程进行排序。
- 提升“自然描述需求”对应的结果相关性。

混合检索整体流程可以分为三个步骤：

1. 使用标量条件进行初步过滤。
2. 在过滤后的候选集上进行向量相似度计算。
3. 基于语义得分和业务规则进行重排序与裁剪。

该方案的优势包括：

- 同时兼顾可控性与灵活性。
- 既能对硬条件进行精确控制。
- 又能对模糊需求进行语义匹配。
- 有利于在选课场景中支持复杂的组合需求。

---

### 2.5 目标二：提升资源利用率（云原生向量数据库）

针对向量检索部分，第二次迭代做了架构层面的优化。

选择方案：

- 引入 Qdrant 云原生向量数据库。

Qdrant 的特点：

- 高性能向量检索能力。
- 原生云架构设计。
- 具备生产级稳定性。
- 支持弹性扩展。

本轮迭代中完成的工作包括：

- 将原本本地嵌入的向量服务迁移至 Qdrant 云实例。
- 将计算密集型的向量检索任务从主服务器剥离。
- 利用分布式架构实现资源的弹性伸缩。

带来的效果：

- 显著降低主服务的计算与存储压力。
- 提升系统整体性能。
- 提升系统稳定性。
- 为未来扩展更多数据源和更大规模检索做好准备。

---

### 2.6 目标三：优化开发流程（智能 CI/CD）

在工程实践层面，第二次迭代引入了 CI/CD。

技术选型：

- 基于 Jenkins 构建企业级 CI/CD 流水线。
- Jenkins 与 GitLab、Kubernetes 实现无缝集成。

流水线主要覆盖的环节包括：

- 代码提交与合并。
- 自动化构建阶段。
- 自动化测试阶段。
- 安全扫描与质量关卡。
- 容器化镜像构建。
- 部署到目标环境的自动化发布。

特点：

- 使用 Jenkins 插件生态提供灵活拓展。
- 针对项目特点定制多个阶段。
- 将测试和质量检查前置到流水线中。

量化收益（源于 PPT 内容）：

- 将平均部署时间从 2 小时缩短至 15 分钟。
- 自动化测试可以提前发现约 85% 的代码缺陷。
- 交付效率和发布质量得到显著提升。

工程文化层面的收获：

- 构建了标准化、可重复的交付流程。
- 降低对单个开发者的个人经验依赖。
- 为高频迭代提供了基础设施保障。

---

### 2.7 第二次迭代核心交付物总览

综合来看，第二次迭代的交付物可归纳为三类。

第一类：

- 已实现的标量 + 向量混合检索能力。

第二类：

- 基于 Qdrant 的云原生向量数据库部署与接入。

第三类：

- 基于 Jenkins 的 CI/CD 自动化流水线。

这三项交付物分别解决：

- 检索效果与智能程度问题。
- 系统资源使用和扩展性问题。
- 开发效率与交付稳定性问题。

---

### 2.8 第二次迭代总结

从检索角度看：

- 系统从「单纯向量检索」升级为「标量 + 向量」混合检索。
- 更能适应选课场景中「筛条件 +说偏好」的复杂需求。
- 在保证延迟可控的前提下提升了推荐质量和可解释性。

从架构角度看：

- 向量检索与主服务解耦。
- 借助 Qdrant 完成云原生化改造。
- 为后续扩展更多课程数据、支持更多学校或更多业务场景提供了可能性。

从工程实践角度看：

- CI/CD 让迭代节奏更加平滑。
- 自动化测试和发布让版本管理更加可控。
- 团队可以将更多精力投入到功能和体验，而不是机械的部署操作。

---

### 2.9 下阶段计划与展望

在第二次迭代的总结部分，PPT 中明确给出了后续计划。

主要包括两个方向。

方向一：

- 优化界面与交互呈现。

目标：

- 让第二次迭代的成果「看得见」。
- 更好地向用户展示混合检索的效果。
- 更直观地体现 Qdrant 云原生向量库的能力。
- 通过前端展示体现 CI/CD 带来的迭代频率提升。

方向二：

- 尝试引入 MCP 协议，支持小规模演示级 Agent。

说明：

- MCP 协议将作为探索性技术方向。
- 当前定位为「支持小规模演示」。
- 因成本原因，不考虑在短期内直接上线生产。
- 更偏向于技术验证和 Demo 级展示。

未来的规划大致可概括为：

- 体验层：增强界面与交互表现力。
- 协议层：探索 MCP 等新协议对 Agent 能力的扩展。
- 智能层：在已有检索与 Agent 基础上继续演化。

---

## 3. 小结

到目前为止：

- 项目已经经过两次完整的敏捷迭代。
- 从最初的 MVP 闭环。
- 演进到具有混合检索、云原生向量库、CI/CD 流水线的版本。

结合两次迭代的内容可以看出：

- 产品上：逐步贴近真实选课场景的复杂需求。
- 技术上：逐渐从「简单可跑」走向「可扩展、可维护」。
- 工程上：在自动化与规范化方面迈出了关键一步。

未来迭代将围绕：

- 前端体验。
- 协议支持（如 MCP）。
- Agent 能力演进。
- 监控与可观测性。

持续完善这一套「基于 Agent 的智能课程推荐平台」。

让它既可以作为一个实用工具。

也可以作为一个完整的、可演示的教学与实践案例。

---